<!DOCTYPE html>
<html>
<head>
    <title>Test Ports</title>
</head>
<body>
    <h1>Port Scanner Test</h1>
    <button onclick="testPorts()">Test Get Listening Ports</button>
    <button onclick="testPortChanges()">Test Get Port Changes</button>
    <pre id="output"></pre>

    <script>
        async function testPorts() {
            const output = document.getElementById('output');
            output.textContent = 'Loading ports...\n';
            
            try {
                // Check if we're in Tauri
                if (typeof window.__TAURI__ === 'undefined') {
                    output.textContent = 'Error: Not running in Tauri environment';
                    return;
                }

                const { invoke } = window.__TAURI__.core;
                const ports = await invoke('get_listening_ports');
                
                output.textContent = `Success! Found ${ports.length} ports:\n\n`;
                output.textContent += JSON.stringify(ports, null, 2);
            } catch (error) {
                output.textContent = `Error: ${error}`;
                console.error('Error fetching ports:', error);
            }
        }

        async function testPortChanges() {
            const output = document.getElementById('output');
            output.textContent = 'Loading port changes...\n';
            
            try {
                if (typeof window.__TAURI__ === 'undefined') {
                    output.textContent = 'Error: Not running in Tauri environment';
                    return;
                }

                const { invoke } = window.__TAURI__.core;
                const changes = await invoke('get_port_changes');
                
                output.textContent = `Success! Found ${changes.length} port changes:\n\n`;
                output.textContent += JSON.stringify(changes, null, 2);
            } catch (error) {
                output.textContent = `Error: ${error}`;
                console.error('Error fetching port changes:', error);
            }
        }
    </script>
</body>
</html>
